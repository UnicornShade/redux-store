{"version":3,"file":"index.mjs","sources":["../src/index.js"],"sourcesContent":["export default class Store {\n  _subscribers = []\n  _state = {}\n\n  constructor(reducer, initialState) {\n    this._reducer = reducer\n    this._state = initialState\n  }\n\n  subscribe = handler => {\n    this._subscribers.push(handler)\n\n    return () => this._unsubscribe(handler)\n  }\n\n  dispatch = action => {\n    this._state = this._reducer(this._state, action)\n  }\n\n  getState = () => {\n    return this._state\n  }\n\n  use = middleware => {\n    if (typeof middleware !== 'function') return\n\n    const next = this.dispatch\n\n    this.dispatch = middleware(this)(next)\n  }\n\n  _unsubscribe = handler => {\n    this._subscribers = this._subscribers.filter(sub => sub !== handler)\n  }\n}\n\nexport function thunk() {\n  return ({ dispatch, getState }) => next => action => {\n    if (typeof action === 'function') {\n      return action(dispatch, getState())\n    }\n\n    return next(action)\n  }\n}\n"],"names":["thunk","ref","next","action","dispatch","getState","constructor","reducer","initialState","_subscribers","_state","subscribe","handler","push","this","_unsubscribe","_reducer","use","middleware","filter","sub"],"mappings":"SAoCgBA,oBACNC,iDAA2BC,mBAAQC,SACnB,mBAAXA,EACFA,EAAOC,EAAUC,KAGnBH,EAAKC,qBAtCdG,SAAYC,EAASC,mBAHrBC,aAAe,QACfC,OAAS,QAOTC,mBAAYC,YACLH,aAAaI,KAAKD,qBAEVE,EAAKC,aAAaH,UAGjCR,kBAAWD,KACJO,OAASI,EAAKE,SAASF,EAAKJ,OAAQP,SAG3CE,2BACSS,EAAKJ,aAGdO,aAAMC,MACsB,mBAAfA,OAELhB,EAAOY,EAAKV,WAEbA,SAAWc,EAAWJ,EAAXI,CAAiBhB,UAGnCa,sBAAeH,KACRH,aAAeK,EAAKL,aAAaU,gBAAOC,UAAOA,IAAQR,UA3BvDI,SAAWT,OACXG,OAASF"}
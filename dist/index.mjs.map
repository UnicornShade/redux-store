{"version":3,"file":"index.mjs","sources":["../src/Component.js","../src/Store.js","../src/connectStore.js","../src/thunk.js"],"sourcesContent":["export class Component {\n  constructor(elem, props) {\n    this.props = props\n    this.elem = elem\n  }\n\n  updateDOM(state) {\n    this.elem.innerHTML = this.render(state)\n  }\n\n  render(_state) {\n    'Component must implement render method'\n  }\n}\n\n","export class Store {\n  __subscribers = []\n  __state = {}\n\n  constructor(reducer, initialState) {\n    this._reducer = reducer\n    this._state = initialState\n  }\n\n  get _state() {\n    return this.__state\n  }\n\n  // *TODO: write deep copy here | Created at: 27.Sep.2019\n  set _state(newState) {\n    this.__state = newState\n    this._notify()\n  }\n\n  subscribe = handler => {\n    this.__subscribers.push(handler)\n\n    return () => this._unsubscribe(handler)\n  }\n\n  dispatch = action => {\n    if (!action) throw new Error('Action is not defined')\n\n    this._state = this._reducer(this._state, action)\n  }\n\n  getState = () => {\n    return this._state\n  }\n\n  use = middleware => {\n    if (typeof middleware !== 'function') return\n\n    const next = this.dispatch\n\n    this.dispatch = middleware(this)(next)\n  }\n\n  _unsubscribe = handler => {\n    this.__subscribers = this.__subscribers.filter(sub => sub !== handler)\n  }\n\n  _notify = () => {\n    this.__subscribers.forEach(subscriber => subscriber(this.getState()))\n  }\n}\n","export function connectStore(store, Component) {\n  return class extends Component {\n    constructor(elem, props) {\n      super(elem, props)\n\n      store.subscribe(this.updateDOM.bind(this))\n      this.dispatch = store.dispatch\n    }\n  }\n}\n","export function useThunk() {\n  return ({ dispatch, getState }) => next => action => {\n    if (typeof action === 'function') {\n      return action(dispatch, getState())\n    }\n\n    return next(action)\n  }\n}\n"],"names":["Component","constructor","elem","props","updateDOM","state","innerHTML","this","render","_state","Store","reducer","initialState","__subscribers","__state","subscribe","handler","push","_unsubscribe","dispatch","action","Error","_reducer","getState","use","middleware","next","filter","sub","_notify","forEach","subscriber","connectStore","store","bind","useThunk","ref","prototypeAccessors","newState"],"mappings":"IAAaA,EACXC,SAAYC,EAAMC,QACXA,MAAQA,OACRD,KAAOA,GAGdE,YAAAA,mBAAUC,QACHH,KAAKI,UAAYC,KAAKC,OAAOH,IAGpCG,YAAAA,gBAAOC,SCVIC,EAIXT,SAAYU,EAASC,mBAHrBC,cAAgB,QAChBC,QAAU,QAiBVC,mBAAYC,YACLH,cAAcI,KAAKD,qBAEXT,EAAKW,aAAaF,UAGjCG,kBAAWC,OACJA,EAAQ,MAAM,IAAIC,MAAM,2BAExBZ,OAASF,EAAKe,SAASf,EAAKE,OAAQW,SAG3CG,2BACShB,EAAKE,aAGde,aAAMC,MACsB,mBAAfA,OAELC,EAAOnB,EAAKY,WAEbA,SAAWM,EAAWlB,EAAXkB,CAAiBC,UAGnCR,sBAAeF,KACRH,cAAgBN,EAAKM,cAAcc,gBAAOC,UAAOA,IAAQZ,UAGhEa,qBACOhB,cAAciB,iBAAQC,UAAcA,EAAWxB,EAAKgB,oBA3CpDD,SAAWX,OACXF,OAASG,gCCNX,SAASoB,EAAaC,EAAOjC,sBAEhCC,WAAYC,EAAMC,eACVD,EAAMC,GAEZ8B,EAAMlB,UAAUR,KAAKH,UAAU8B,KAAK3B,YAC/BY,SAAWc,EAAMd,4GCNZgB,oBACNC,iDAA2BV,mBAAQN,SACnB,mBAAXA,EACFA,EAAOD,EAAUI,KAGnBG,EAAKN,MFGdiB,EAAI5B,6BACKF,KAAKO,WAIVL,oBAAO6B,QACJxB,QAAUwB,OACVT"}
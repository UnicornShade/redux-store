{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["export default class Store {\n  __subscribers = []\n  __state = {}\n\n  constructor(reducer, initialState) {\n    this._reducer = reducer\n    this._state = initialState\n  }\n\n  get _state() {\n    return this.__state\n  }\n\n  // *TODO: write deep copy here | Created at: 27.Sep.2019\n  set _state(newState) {\n    this.__state = newState\n    this._notify()\n  }\n\n  subscribe = handler => {\n    this.__subscribers.push(handler)\n\n    return () => this._unsubscribe(handler)\n  }\n\n  dispatch = action => {\n    this._state = this._reducer(this._state, action)\n  }\n\n  getState = () => {\n    return this._state\n  }\n\n  use = middleware => {\n    if (typeof middleware !== 'function') return\n\n    const next = this.dispatch\n\n    this.dispatch = middleware(this)(next)\n  }\n\n  _unsubscribe = handler => {\n    this.__subscribers = this.__subscribers.filter(sub => sub !== handler)\n  }\n\n  _notify = () => {\n    this.__subscribers.forEach(subscriber => subscriber(this.getState()))\n  }\n}\n\nexport function useThunk() {\n  return ({ dispatch, getState }) => next => action => {\n    if (typeof action === 'function') {\n      return action(dispatch, getState())\n    }\n\n    return next(action)\n  }\n}\n"],"names":["Store","constructor","reducer","initialState","__subscribers","__state","subscribe","handler","push","this","_unsubscribe","dispatch","action","_state","_reducer","getState","use","middleware","next","filter","sub","_notify","forEach","subscriber","prototypeAccessors","newState","ref"],"mappings":"gLAAe,IAAMA,EAInBC,SAAYC,EAASC,mBAHrBC,cAAgB,QAChBC,QAAU,QAiBVC,mBAAYC,YACLH,cAAcI,KAAKD,qBAEXE,EAAKC,aAAaH,UAGjCI,kBAAWC,KACJC,OAASJ,EAAKK,SAASL,EAAKI,OAAQD,SAG3CG,2BACSN,EAAKI,aAGdG,aAAMC,MACsB,mBAAfA,OAELC,EAAOT,EAAKE,WAEbA,SAAWM,EAAWR,EAAXQ,CAAiBC,UAGnCR,sBAAeH,KACRH,cAAgBK,EAAKL,cAAce,gBAAOC,UAAOA,IAAQb,UAGhEc,qBACOjB,cAAckB,iBAAQC,UAAcA,EAAWd,EAAKM,oBAzCpDD,SAAWZ,OACXW,OAASV,gCAGhBqB,EAAIX,6BACKJ,KAAKJ,WAIVQ,oBAAOY,QACJpB,QAAUoB,OACVJ,yEAkCF,2BACGK,iDAA2BR,mBAAQN,SACnB,mBAAXA,EACFA,EAAOD,EAAUI,KAGnBG,EAAKN"}